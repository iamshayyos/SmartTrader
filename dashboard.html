<!DOCTYPE html>
<html lang="en" x-data="{ menuOpen:false }"
      x-init="if(!localStorage.getItem('currentUser')) location.href='index.html'">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Dashboard – SmartTrader</title>

  <!-- Tailwind + Alpine -->
  <script src="https://cdn.tailwindcss.com"></script>
  <script>tailwind.config = { darkMode:'class' };</script>
  <script src="https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js" defer></script>

  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;500;600&display=swap" rel="stylesheet"/>
  <style>
    html { font-family:'Poppins',sans-serif }
    /* כרטיסים */
    #assetCards>div            { background:#f8fafc; color:#0f172a }
    .dark #assetCards>div      { background:#334155; color:#cbd5e1 }
    .dark #assetCards>div a    { color:#93c5fd }
    /* אינפוט חיפוש */
    .dark #addAssetInput{
      background:#1e293b!important; color:#cbd5e1!important; border-color:#6366f1!important;
    }
    /* navbar hover */
    nav a:hover         { background-color:rgba(99,102,241,.12) }
    .dark nav a:hover   { background-color:#334155 }
  </style>
</head>
<body class="min-h-screen flex flex-col bg-gradient-to-br
             from-white to-gray-100 dark:from-gray-900 dark:to-gray-800 transition-colors">

  <button id="theme-toggle"
        class="fixed bottom-4 right-4 z-50 w-12 h-12 rounded-full
               flex items-center justify-center
               bg-white dark:bg-gray-700 text-gray-800 dark:text-gray-200
               shadow-lg border border-gray-300 dark:border-gray-600
               hover:scale-110 transition">
  <span id="light-icon">🌙</span>
  <span id="dark-icon" class="hidden">☀️</span>
</button>
  

  <!-- HEADER -->
<header class="sticky top-0 inset-x-0 bg-white/50 dark:bg-gray-800/50 backdrop-blur-md shadow-md z-30">
    <div class="max-w-6xl mx-auto flex flex-col md:flex-row items-center justify-between px-6 py-4">

      <!-- Logo + Hamburger -->
      <div class="flex items-center justify-between w-full md:w-auto">
        <h1 class="text-2xl font-semibold bg-gradient-to-r from-indigo-600 to-pink-500
                   bg-clip-text text-transparent">SmartTrader</h1>

        <button @click="menuOpen=!menuOpen" class="relative w-8 h-8 md:hidden">
          <span class="absolute w-full h-0.5 bg-current transition"
                :class="menuOpen ? 'rotate-45 top-3' : 'top-1'"></span>
          <span class="absolute w-full h-0.5 bg-current transition"
                :class="menuOpen ? 'opacity-0'        : 'top-3'"></span>
          <span class="absolute w-full h-0.5 bg-current transition"
                :class="menuOpen ? '-rotate-45 top-3' : 'top-5'"></span>
        </button>
      </div>

      <!-- NAV LINKS -->
      <nav :class="menuOpen ? 'block' : 'hidden'"
           class="w-full md:w-auto md:flex md:space-x-6 mt-4 md:mt-0">
       <a href="dashboard.html"
   class="block md:inline px-2 py-1 rounded
          bg-indigo-50 dark:bg-gray-700 font-semibold
          text-gray-800 dark:text-gray-200">Dashboard</a>

        <a href="sources.html"    class="block md:inline px-2 py-1 rounded transition
                                       text-gray-800 dark:text-gray-200">Sources</a>
        <a href="portfolio.html"  class="block md:inline px-2 py-1 rounded transition
                                       text-gray-800 dark:text-gray-200">Portfolio</a>
        <a href="statistics.html" class="block md:inline px-2 py-1 rounded transition
                                       text-gray-800 dark:text-gray-200">Stats</a>
        <button onclick="logout()"
                class="w-full md:w-auto mt-2 md:mt-0 bg-indigo-600 hover:bg-indigo-700
                       text-white font-medium py-1 px-4 rounded-md">Logout</button>
      </nav>
    </div>
  </header>

  <!-- OFFSET FOR STICKY HEADER -->
<div class="h-24"></div>

  <!-- MAIN -->
  <main class="flex-1 p-8 max-w-6xl mx-auto space-y-10">
    <h2 class="text-3xl font-semibold bg-gradient-to-r from-indigo-600 to-pink-500
               bg-clip-text text-transparent text-center">Dashboard</h2>

    <!-- SEARCH -->
    <div class="relative max-w-lg mx-auto">
      <input id="addAssetInput"
             class="w-full py-4 px-6 rounded-2xl bg-white border-2 border-indigo-300
                    shadow-lg text-lg placeholder-gray-500 focus:outline-none
                    focus:ring-2 focus:ring-indigo-400 transition"
             placeholder="🔍 Search and add asset…">
      <ul id="suggestions"
          class="hidden absolute top-full left-0 w-full mt-2 bg-white dark:bg-gray-700
                 rounded-2xl shadow-xl max-h-80 overflow-y-auto z-30"></ul>
    </div>

    <!-- ASSET CARDS -->
    <div id="assetCards"
         class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-10">
      <!-- popu­lated via JS -->
    </div>
  </main>

  <!-- SCRIPTS -->
  <script src="js/auth.js"></script>
  <script src="js/dashboard.js"></script>
  <script src="js/theme.js"></script>
  <script>
    document.getElementById('theme-toggle').onclick = () => Theme.toggle();
  </script>
</body>
</html>
