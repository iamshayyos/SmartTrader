<!DOCTYPE html>
<html lang="en"
      x-data="{ menuOpen:false }"
      x-init="if(!localStorage.getItem('currentUser')) location.href='index.html'">

<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Stats – SmartTrader</title>

  <!-- Poppins + Tailwind (v3) + Alpine + Chart.js -->
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;500;600&display=swap" rel="stylesheet"/>
  <script src="https://cdn.tailwindcss.com"></script>
  <script>tailwind.config = { darkMode:'class' };</script>
  <script src="https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js" defer></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

  <style>
    html{font-family:'Poppins',sans-serif}
    .glass{background:rgba(255,255,255,.2);backdrop-filter:blur(8px)}
    .gradient-text{background:linear-gradient(90deg,#4f46e5,#ec4899);
                   -webkit-background-clip:text;color:transparent}
    /* Dark */
    .dark body{background:#0f172a!important;color:#cbd5e1}
    .dark .glass{background:rgba(30,41,59,.6)}
    nav a:hover{background-color:rgba(99,102,241,.12)}
    .dark nav a:hover{background-color:#334155}
  </style>
</head>

<body class="min-h-screen flex flex-col
             bg-gradient-to-br from-white to-gray-100
             dark:from-gray-900 dark:to-gray-800 transition-colors">

  <!-- DARK/LIGHT TOGGLE -->
  <button id="theme-toggle"
          class="fixed bottom-4 right-4 z-50 w-12 h-12 rounded-full
                 flex items-center justify-center
                 bg-white dark:bg-gray-700 text-gray-800 dark:text-gray-200
                 shadow-lg border border-gray-300 dark:border-gray-600
                 hover:scale-110 transition">
    <span id="light-icon">🌙</span>
    <span id="dark-icon" class="hidden">☀️</span>
  </button>

  <!-- HEADER -->
  <header class="sticky top-0 inset-x-0 glass shadow-md z-30">
    <div class="max-w-6xl mx-auto px-6 py-3 flex flex-col md:flex-row md:items-center justify-between">

      <!-- Logo + Hamburger -->
      <div class="flex items-center justify-between w-full md:w-auto">
        <h1 class="text-2xl font-semibold gradient-text">SmartTrader</h1>
        <button @click="menuOpen=!menuOpen"
                class="md:hidden p-2 rounded-full glass hover:scale-105 transition">☰</button>
      </div>

      <!-- NAV -->
      <nav :class="menuOpen ? 'block' : 'hidden'"
           class="w-full md:w-auto md:flex md:space-x-6 mt-4 md:mt-0">
        <a href="dashboard.html"
           class="block md:inline px-2 py-1 rounded transition
                  text-gray-800 dark:text-gray-200">Dashboard</a>
        <a href="sources.html"
           class="block md:inline px-2 py-1 rounded transition
                  text-gray-800 dark:text-gray-200">Sources</a>
        <a href="portfolio.html"
           class="block md:inline px-2 py-1 rounded transition
                  text-gray-800 dark:text-gray-200">Portfolio</a>
        <a href="statistics.html"
           class="block md:inline px-2 py-1 rounded bg-indigo-50 dark:bg-gray-700 font-semibold
                  text-gray-800 dark:text-gray-200">Stats</a>
        <button onclick="logout()"
                class="w-full md:w-auto mt-2 md:mt-0 bg-indigo-600 hover:bg-indigo-700
                       text-white font-medium py-1 px-4 rounded-md">Logout</button>
      </nav>
    </div>
  </header>

  <!-- OFFSET -->
  <div class="h-16"></div>

  <!-- MAIN -->
  <main class="flex-1 max-w-6xl mx-auto p-6 space-y-6">
    <h2 class="text-3xl font-semibold gradient-text text-center">📈 Recommendation Stats</h2>

    <section class="glass p-6 rounded-2xl shadow hover:shadow-lg transition">
      <canvas id="recommendationChart" class="w-full h-64"></canvas>
    </section>

    <div class="text-center">
      <a href="dashboard.html" class="text-indigo-500 hover:underline">← Back to Dashboard</a>
    </div>
  </main>

  <!-- SCRIPTS -->
  <script src="js/auth.js"></script>
  <script src="js/statistics.js"></script>
  <script src="js/theme.js"></script>
  <script>
    document.getElementById('theme-toggle').onclick = () => Theme.toggle();
  </script>
</body>
</html>
